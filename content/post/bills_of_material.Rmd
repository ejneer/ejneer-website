---
title: "Bills of Material"
subtitle: ""
summary: ""
author: "Eric Neer"
output: 
  html_document:
    toc: true
date: 2020-00-00
categories: []
tags: []
projects: []
draft: true
references:
- id: lunn1992
  title: "MRP: Integrating Material Requirements Planning and Modern Business"
  author:
    - family: Lunn
      given: Terry
    - family: Neff
      given: Susan
  issued:
    year: 1992
  type: book
---

```{r, include=FALSE}
library(DiagrammeR)
library(RSQLite)
```

### Description
In manufacturing, a bill of materials (BOM) defines all of the items required to produce a good.
Often times this consists of raw materials (e.g. steel, aluminum) that are transformed or other components that are assembled to make the finished product.
It may also contain ancillary items used during manufacturing, such as tooling or consumable chemicals.

<div align="center">
```{r echo=FALSE}
grViz("
  digraph {
    node [shape='box']
    edge [arrowhead='none']
    LP [label='Lower Pen']
    UB [label='Upper Barrel']
    T1 [label='Tubing']
    T2 [label='Tubing']
    
    Pen -> {LP Ink UB}
    LP -> {Inner Point Outer}
    Inner -> T1
    Outer -> T2

    UB -> {Sleeve Clip}
    Sleeve -> {Top Tube}
    Tube -> Tubing
    Clip -> Steel
    
    node [shape='plaintext']
    L0 [label='Level 0']
    L1 [label='Level 1']
    L2 [label='Level 2']
    L3 [label='Level 3']
    L4 [label='Level 4']
    
    subgraph labels {
      rankdir='TB'
      L0 -> L1 -> L2 -> L3 -> L4 [style='invis']
    }
  }
")
```
<figcaption>Hypothetical multi-level bill of materials for a pen. [@lunn1992]</figcaption>
</div>

### Data Structure
+ Adjacency lists
+ Graphs

Looking at the bill of materials depiction above, it is obvious that a BOM is really just a tree whose nodes are components (or subassemblies) and edges indicate a component's belonging to its parent's BOM.
The quantity of a component in a parent's BOM would also be indicated by an edge, as it is a property of the relationship between the parent and component.
Most MRP systems persist data using a typical relational database which stores information in a tabular fashion.
Thus, the information encoded in the BOM tree structure must be transformed to fit within a table structure.
This is typically done using an [adjacency list](https://en.wikipedia.org/wiki/Adjacency_list) which may be easily encoded as a table, with 1 row per relationship.
The table below represents the first two levels of the pen bill of materials taken from [@lunn1992] as it may appear in a database.

| Component    | Parent       | Quantity | Level |
|--------------|--------------|----------|-------|
| Pen          | NULL         | NULL     | 0     |
| Lower Pen    | Pen          | 1        | 1     |
| Upper Barrel | Pen          | 1        | 1     |
| Ink          | Pen          | 1        | 1     |
| Inner        | Lower Pen    | 1        | 2     |
| Point        | Lower Pen    | 1        | 2     |
| Outer        | Lower Pen    | 1        | 2     |
| Sleeve       | Upper Barrel | 1        | 2     |
| Clip         | Upper Barrel | 1        | 2     |


### Applications
+ find all components of a bom and accumulate quantities
  + sql recursive cte
  + in memory dfs

### References
